{"version":3,"sources":["webpack:///./src/components/cookies.js"],"names":["defaultCookies","settings","colored_ranks","maxAge","store","cookiesSync","map","el","dispatch","type","data","cookie","load","subscribe","save","getState","path","CookieManager","useCookies","cookies","setCookie","useSelector","state","useDispatch","cookiesOptions","useEffect","console","log","name","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA,IAAIA,cAAc,GAAG;AACnBC,UAAQ,EAAE;AACRC,iBAAa,EAAE;AADP;AADS,CAArB;AAMA,IAAIC,MAAM,GAAG,OAAb;AAEe,yEAACC,KAAD,EAAQC,WAAR,EAAwB;AACrCA,aAAW,CAACC,GAAZ,CAAgB,UAAAC,EAAE,EAAI;AACpBH,SAAK,CAACI,QAAN,CAAe;AACbC,UAAI,EAAE,KADO;AAEbC,UAAI,sBAAIH,EAAJ,EAASI,oDAAM,CAACC,IAAP,CAAYL,EAAZ,CAAT;AAFS,KAAf;AAIAH,SAAK,CAACS,SAAN,CAAgB,YAAM;AACpBF,0DAAM,CAACG,IAAP,CAAYP,EAAZ,EAAgBH,KAAK,CAACW,QAAN,GAAiBR,EAAjB,CAAhB,EAAsC;AAACS,YAAI,EAAE,GAAP;AAAYb,cAAM,EAANA;AAAZ,OAAtC;AACD,KAFD;AAGD,GARD;AASD,CAVD;AAYO,IAAMc,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAAA,oBACJC,+DAAU,CAAC,CAAC,UAAD,CAAD,CADN;AAAA;AAAA,MAC1BC,OAD0B;AAAA,MACjBC,SADiB;;AAEjC,MAAMhB,KAAK,GAAGiB,+DAAW,CAAC,UAAAC,KAAK;AAAA,WAAIA,KAAJ;AAAA,GAAN,CAAzB;AACA,MAAMd,QAAQ,GAAGe,+DAAW,EAA5B;AACA,MAAMC,cAAc,GAAG;AAACR,QAAI,EAAE,GAAP;AAAYb,UAAM,EAAE;AAApB,GAAvB;AACAsB,yDAAS,CAAC,YAAM;AACdC,WAAO,CAACC,GAAR,CAAYR,OAAZ;;AACA,SAAK,IAAIS,IAAT,IAAiB5B,cAAjB,EAAiC;AAC/B,UAAI,QAAOmB,OAAO,CAACS,IAAD,CAAd,MAAyB,QAA7B,EAAuC;AACrC,aAAK,IAAIrB,EAAT,IAAeP,cAAc,CAAC4B,IAAD,CAA7B,EAAqC;AACnC,cAAI,EAAErB,EAAE,IAAIY,OAAO,CAACS,IAAD,CAAf,CAAJ,EAA4B;AAC1BR,qBAAS,CAACQ,IAAD,oBAAWT,OAAO,CAACS,IAAD,CAAlB,sBAA2BrB,EAA3B,EAAgCP,cAAc,CAAC4B,IAAD,CAAd,CAAqBrB,EAArB,CAAhC,IAA2DiB,cAA3D,CAAT;AACD;AACF;;AACD,aAAK,IAAIjB,GAAT,IAAeY,OAAO,CAACS,IAAD,CAAtB,EAA8B;AAC5B,cAAI,EAAErB,GAAE,IAAIP,cAAc,CAAC4B,IAAD,CAAtB,CAAJ,EAAmC;AACjCR,qBAAS,CAACQ,IAAD,oBAAWT,OAAO,CAACS,IAAD,CAAlB,sBAA2BrB,GAA3B,EAAgCsB,SAAhC,IAA4CL,cAA5C,CAAT;AACD;AACF;AACF,OAXD,MAWO;AACLJ,iBAAS,CAACQ,IAAD,EAAO5B,cAAc,CAAC4B,IAAD,CAArB,EAA6BJ,cAA7B,CAAT;AACD;AACF;;AACDhB,YAAQ,CAAC;AAACC,UAAI,EAAE,iBAAP;AAA0BC,UAAI,EAAES,OAAO,CAAClB;AAAxC,KAAD,CAAR;AACD,GAnBQ,EAmBN,EAnBM,CAAT;AAoBAwB,yDAAS,CAAC,YAAM;AACdL,aAAS,CAAC,UAAD,EAAahB,KAAK,CAACH,QAAnB,EAA6BuB,cAA7B,CAAT;AACD,GAFQ,EAEN,CAACpB,KAAK,CAACH,QAAP,CAFM,CAAT;AAGA,SAAQ,IAAR;AACD,CA7BM,C","file":"1.main.js","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useCookies } from 'react-cookie'\r\nimport cookie from 'react-cookies'\r\n\r\nlet defaultCookies = {\r\n  settings: {\r\n    colored_ranks: false\r\n  }\r\n}\r\n\r\nlet maxAge = 5184000\r\n\r\nexport default (store, cookiesSync) => {\r\n  cookiesSync.map(el => {\r\n    store.dispatch({\r\n      type: 'SET',\r\n      data: {[el]: cookie.load(el)}\r\n    })\r\n    store.subscribe(() => {\r\n      cookie.save(el, store.getState()[el], {path: '/', maxAge})\r\n    })\r\n  })\r\n}\r\n\r\nexport const CookieManager = () => {\r\n  const [cookies, setCookie] = useCookies(['settings'])\r\n  const store = useSelector(state => state)\r\n  const dispatch = useDispatch()\r\n  const cookiesOptions = {path: '/', maxAge: 2419200}\r\n  useEffect(() => {\r\n    console.log(cookies)\r\n    for (let name in defaultCookies) {\r\n      if (typeof cookies[name] === 'object') {\r\n        for (let el in defaultCookies[name]) {\r\n          if (!(el in cookies[name])) {\r\n            setCookie(name, {...cookies[name], [el]: defaultCookies[name][el]}, cookiesOptions)\r\n          }\r\n        }\r\n        for (let el in cookies[name]) {\r\n          if (!(el in defaultCookies[name])) {\r\n            setCookie(name, {...cookies[name], [el]: undefined}, cookiesOptions)\r\n          }\r\n        }\r\n      } else {\r\n        setCookie(name, defaultCookies[name], cookiesOptions)\r\n      }\r\n    }\r\n    dispatch({type: 'UPDATE_SETTINGS', data: cookies.settings})\r\n  }, [])\r\n  useEffect(() => {\r\n    setCookie('settings', store.settings, cookiesOptions)\r\n  }, [store.settings])\r\n  return (null)\r\n}"],"sourceRoot":""}